<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <title>Ageint Security DMSS Tutorial</title>
    <style>
        /* ===== CORE PHILOSOPHY: 8-POINT GRID SYSTEM & PREMIUM DESIGN ===== */
        :root {
            /* 8-Point Grid System */
            --space-xs: 8px;
            --space-sm: 16px;
            --space-md: 24px;
            --space-lg: 32px;
            --space-xl: 40px;
            --space-2xl: 48px;
            --space-3xl: 56px;
            --space-4xl: 64px;
            --space-5xl: 72px;
            --space-6xl: 80px;

            /* Typography Scale */
            --text-xs: 12px;
            --text-sm: 14px;
            --text-base: 16px;
            --text-lg: 18px;
            --text-xl: 20px;
            --text-2xl: 24px;
            --text-3xl: 30px;
            --text-4xl: 36px;
            --text-5xl: 48px;

            /* Default Theme Colors */
            --accent-color: #3182CE;
            --accent-color-rgb: 49, 130, 206;
            --accent-light: #E6F3FF;
            --accent-dark: #2C5AA0;
            --accent-text-color: #FFFFFF;

            /* Group Box Colors for Light Mode */
            --group-box-bg: #f0f2f5;
            --group-box-text: #1a1a1a;

            /* Light Mode Colors */
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #1a202c;
            --text-secondary: #4a5568;
            --text-inverse: #ffffff;
            --border-gray: #e2e8f0;
            --shadow-color: rgba(0, 0, 0, 0.1);

            /* Layout & Components */
            --max-content-width: 800px;
            --header-height: 80px;
            --border-radius: 8px;
            --border-radius-lg: 12px;
            --border-radius-xl: 16px;
            --border-radius-2xl: 24px;
            --border-radius-full: 9999px;

            /* Shadows */
            --shadow-subtle: 0 1px 3px rgba(var(--accent-color-rgb), 0.1);
            --shadow-medium: 0 4px 16px rgba(var(--accent-color-rgb), 0.15);
            --shadow-strong: 0 10px 32px rgba(var(--accent-color-rgb), 0.2);
            --shadow-glow: 0 0 24px rgba(var(--accent-color-rgb), 0.3);

            /* Transitions */
            --transition-fast: 0.15s ease;
            --transition-base: 0.3s ease;
            --transition-slow: 0.5s ease;

            /* Z-Index Layers */
            --z-welcome: 1000;
            --z-header: 100;
            --z-navigation: 50;
            --z-disclaimer: 75;
            --z-content: 10;
        }

        /* Dark Mode Theme */
        body.theme-dark {
            --bg-primary: #1a202c;
            --bg-secondary: #2d3748;
            --bg-tertiary: #4a5568;
            --text-primary: #ffffff;
            --text-secondary: #cbd5e0;
            --text-inverse: #1a202c;
            --border-gray: #4a5568;
            --shadow-color: rgba(0, 0, 0, 0.3);

            /* Group Box Colors for Dark Mode */
            --group-box-bg: #2c2f33;
            --group-box-text: #ffffff;
        }

        /* Text Contrast System - THE FINAL WORD */
        body.contrast-dark-on-light {
            --accent-text-color: #1a1a1a;
        }

        /* ===== GLOBAL RESET & BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-primary);
            min-height: 100vh;
            transition: background-color var(--transition-base), color var(--transition-base);
            margin: 0;
            padding: 0;
        }

        body.scroll-lock {
            overflow: hidden;
        }

        /* ===== PASSWORD GATE STYLING ===== */
        #password-gate {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            z-index: calc(var(--z-welcome) + 100);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
            visibility: visible;
            transition: opacity var(--transition-slow), visibility var(--transition-slow);
        }

        #password-gate.is-hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .password-content {
            background: var(--bg-primary);
            border-radius: var(--border-radius-2xl);
            padding: var(--space-6xl) var(--space-5xl);
            box-shadow: var(--shadow-strong);
            text-align: center;
            max-width: 480px;
            width: 95%;
            border: 1px solid var(--border-gray);
            transform: scale(0.9);
            animation: passwordEntrance 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
        }

        @keyframes passwordEntrance {
            to {
                transform: scale(1);
            }
        }

        .lock-icon {
            color: var(--accent-color);
            margin-bottom: var(--space-lg);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .password-title {
            font-size: var(--text-4xl);
            font-weight: 900;
            color: var(--accent-color);
            margin-bottom: var(--space-md);
            line-height: 1.2;
        }

        .password-subtitle {
            font-size: var(--text-lg);
            color: var(--text-secondary);
            margin-bottom: var(--space-4xl);
            line-height: 1.5;
        }

        .password-form {
            display: flex;
            flex-direction: column;
            gap: var(--space-lg);
        }

        .password-input-container {
            position: relative;
        }

        .password-input {
            width: 100%;
            padding: var(--space-lg) var(--space-xl);
            font-size: var(--text-lg);
            font-weight: 500;
            background: var(--bg-secondary);
            border: 2px solid var(--border-gray);
            border-radius: var(--border-radius-lg);
            color: var(--text-primary);
            transition: var(--transition-base);
            outline: none;
            text-align: center;
            letter-spacing: 2px;
        }

        .password-input:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(var(--accent-color-rgb), 0.1);
            background: var(--bg-primary);
        }

        .password-input::placeholder {
            color: var(--text-secondary);
            letter-spacing: normal;
        }

        .password-submit {
            padding: var(--space-lg) var(--space-2xl);
            font-size: var(--text-lg);
            font-weight: 700;
            background: var(--accent-color);
            color: var(--accent-text-color);
            border: none;
            border-radius: var(--border-radius-lg);
            cursor: pointer;
            transition: var(--transition-base);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            position: relative;
            overflow: hidden;
        }

        .password-submit:hover {
            background: var(--accent-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .password-submit:active {
            transform: translateY(0);
        }

        .password-submit:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .password-error {
            color: #E53E3E;
            font-size: var(--text-sm);
            font-weight: 600;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: opacity var(--transition-base), visibility var(--transition-base), transform var(--transition-base);
            text-align: center;
            background: rgba(229, 62, 62, 0.1);
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--border-radius);
            border: 1px solid rgba(229, 62, 62, 0.2);
        }

        .password-error.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        /* Loading state for submit button */
        .password-submit.loading {
            pointer-events: none;
        }

        .password-submit.loading::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top-color: currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* ===== WELCOME EXPERIENCE STYLING ===== */
        #welcome-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            z-index: var(--z-welcome);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
            visibility: visible;
            transition: opacity var(--transition-slow), visibility var(--transition-slow);
        }

        #welcome-modal.is-hidden {
            opacity: 0;
            visibility: hidden;
        }

        .welcome-content {
            background: var(--bg-primary);
            border-radius: var(--border-radius-2xl);
            padding: var(--space-6xl) var(--space-5xl);
            box-shadow: var(--shadow-strong);
            text-align: center;
            max-width: 600px;
            width: 95%;
            border: 1px solid var(--border-gray);
            transform: scale(0.9);
            animation: welcomeEntrance 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
        }

        @keyframes welcomeEntrance {
            to {
                transform: scale(1);
            }
        }

        .welcome-title {
            font-size: var(--text-4xl);
            font-weight: 900;
            color: var(--accent-color);
            margin-bottom: var(--space-md);
            line-height: 1.2;
        }

        .welcome-subtitle {
            font-size: var(--text-lg);
            color: var(--text-secondary);
            margin-bottom: var(--space-4xl);
            line-height: 1.5;
        }

        .customization-section {
            margin-bottom: var(--space-4xl);
        }

        .section-title {
            font-size: var(--text-xl);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-md);
        }

        /* Theme Toggle */
        .theme-toggle-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-4xl);
        }

        .theme-option {
            padding: var(--space-sm) var(--space-md);
            border: 2px solid var(--border-gray);
            border-radius: var(--border-radius-lg);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-base);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            position: relative;
            overflow: hidden;
        }

        .theme-option.active {
            border-color: var(--accent-color);
            background: var(--accent-color);
            color: var(--accent-text-color);
            box-shadow: var(--shadow-glow);
        }

        .theme-option:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* Color Swatches */
        .color-swatches {
            display: flex;
            justify-content: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-4xl);
        }

        .color-swatch {
            width: var(--space-2xl);
            height: var(--space-2xl);
            border-radius: var(--border-radius-full);
            border: 3px solid transparent;
            cursor: pointer;
            transition: var(--transition-base);
            position: relative;
            box-shadow: var(--shadow-subtle);
        }

        .color-swatch:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-medium);
        }

        .color-swatch.active {
            border-color: var(--text-primary);
            box-shadow: var(--shadow-glow);
            transform: scale(1.15);
        }

        .color-swatch.active::after {
            content: 'âœ“';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: var(--text-sm);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .color-swatch.red { background: #E53E3E; }
        .color-swatch.green { background: #38A169; }
        .color-swatch.blue { background: #3182CE; }
        .color-swatch.yellow { background: #eec643; }
        .color-swatch.purple { background: #805AD5; }

        /* ===== DISCLAIMER NOTIFICATION ===== */
        #disclaimer-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, var(--accent-color) 0%, color-mix(in srgb, var(--accent-color) 90%, black) 100%);
            color: var(--accent-text-color);
            padding: var(--space-sm) var(--space-lg);
            z-index: 10000 !important;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-md);
            font-size: var(--text-sm);
            font-weight: 500;
            box-shadow: var(--shadow-medium);
            transform: translateY(0);
            transition: transform var(--transition-base), opacity var(--transition-base);
        }

        #disclaimer-bar.is-hidden {
            transform: translateY(-100%);
            opacity: 0;
            pointer-events: none;
        }

        .disclaimer-text {
            text-align: center;
            line-height: 1.4;
        }

        .disclaimer-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: inherit;
            width: 24px;
            height: 24px;
            border-radius: var(--border-radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition-fast);
            font-size: 16px;
            line-height: 1;
            flex-shrink: 0;
        }

        .disclaimer-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        /* ===== TUTORIAL CONTENT CONTAINER ===== */
        #tutorial-content {
            width: 100%;
            height: 100vh;
            opacity: 0;
            visibility: hidden;
            transition: opacity var(--transition-slow), visibility var(--transition-slow);
        }

        #tutorial-content.is-visible {
            opacity: 1;
            visibility: visible;
        }

        /* Fixed Header */
        .fixed-header {
            position: fixed;
            top: 44px;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-gray);
            padding: var(--space-md) var(--space-lg);
            z-index: var(--z-header);
            transition: var(--transition-base);
        }

        body.theme-dark .fixed-header {
            background: rgba(26, 32, 44, 0.95);
        }

        body.disclaimer-hidden .fixed-header {
            top: 0;
        }

        .header-content {
            max-width: var(--max-content-width);
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: var(--text-xl);
            font-weight: 900;
            color: var(--accent-color);
            text-decoration: none;
        }

        .brand-label {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* ===== WIZARD ENGINE - THE FOOLPROOF IMPLEMENTATION ===== */
        .main-container {
            /* NEUTRALIZED: All layout interference removed for fixed wizard positioning */
        }

        /* THE CENTERING FIX - MANDATORY & FINAL - ALL CONFLICTS ELIMINATED */
        #wizard-container {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            margin: 0 !important;
            perspective: 1500px;
            width: 100vw;
            height: 100vh;
            z-index: 1;
        }

        /* THE WIZARD ANIMATION & VISIBILITY - THE CORRECT IMPLEMENTATION */
        #wizard-container > section {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotateY(-90deg);
            width: 90vw;
            max-width: var(--max-content-width);
            height: auto;
            max-height: 80vh;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: transform 0.6s ease-in-out, opacity 0.6s ease-in-out;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: var(--space-4xl) var(--space-md);
            margin: 0;
            overflow-y: auto;
            box-sizing: border-box;
        }

        #wizard-container > section.active-step {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
            transform: translate(-50%, -50%) rotateY(0deg);
            z-index: 10;
        }

        /* Hero Section Styling */
        .hero-section {
            background: linear-gradient(135deg, var(--accent-color) 0%, color-mix(in srgb, var(--accent-color) 80%, black) 100%);
            color: var(--accent-text-color);
            text-align: center;
            justify-content: center;
        }

        .hero-title {
            font-size: var(--text-5xl);
            font-weight: 900;
            margin-bottom: var(--space-md);
            line-height: 1.1;
            letter-spacing: -0.02em;
            color: var(--accent-text-color);
            text-shadow: 0 2px 4px rgba(255, 255, 255, 0.3);
        }

        .hero-subtitle {
            font-size: var(--text-lg);
            opacity: 0.95;
            margin-bottom: var(--space-lg);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
            font-weight: 400;
        }

        /* Content Sections */
        .content-section {
            background: var(--bg-primary);
            color: var(--text-primary);
            text-align: left;
            border-radius: var(--border-radius-xl);
            box-shadow: var(--shadow-medium);
            border: 1px solid var(--border-gray);
            margin: var(--space-md);
            padding: var(--space-2xl);
        }

        .content-section h2 {
            font-size: var(--text-3xl);
            font-weight: 800;
            color: var(--accent-color);
            margin-bottom: var(--space-lg);
            line-height: 1.2;
        }

        .content-section p {
            margin-bottom: var(--space-md);
            line-height: 1.7;
        }

        .content-section ol,
        .content-section ul {
            margin-bottom: var(--space-lg);
            padding-left: var(--space-lg);
        }

        .content-section li {
            margin-bottom: var(--space-sm);
            line-height: 1.6;
        }

        .content-section code {
            background: var(--bg-secondary);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
            font-size: 0.9em;
            color: var(--accent-color);
            font-weight: 600;
        }

        .info-box {
            background-color: var(--group-box-bg);
            color: var(--group-box-text);
            border: 1px solid var(--accent-color);
            border-radius: var(--border-radius-lg);
            padding: var(--space-md);
            margin: var(--space-lg) 0;
        }

        .note-block {
            background-color: var(--group-box-bg);
            color: var(--group-box-text);
            border-left: 4px solid var(--accent-color);
            padding: var(--space-md);
            margin: var(--space-lg) 0;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
        }

        .important-text {
            color: #D69E2E;
            font-weight: 600;
        }

        .placeholder-text {
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Footer Section */
        .footer-section {
            background: linear-gradient(135deg, var(--accent-color) 0%, color-mix(in srgb, var(--accent-color) 80%, black) 100%);
            color: var(--accent-text-color);
            text-align: center;
            justify-content: center;
        }

        .completion-content h2 {
            font-size: var(--text-4xl);
            font-weight: 900;
            margin-bottom: var(--space-lg);
            color: var(--accent-text-color);
        }

        .contact-info {
            margin-top: var(--space-2xl);
            padding: var(--space-lg);
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius-lg);
            backdrop-filter: blur(10px);
        }

        .contact-info a {
            color: var(--accent-text-color);
            text-decoration: none;
            font-weight: 600;
            border-bottom: 2px solid transparent;
            transition: var(--transition-base);
        }

        .contact-info a:hover {
            border-bottom-color: var(--accent-text-color);
        }

        /* ===== WIZARD NAVIGATION BAR ===== */
        .wizard-navigation {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--border-gray);
            padding: var(--space-md) var(--space-lg);
            z-index: var(--z-navigation);
        }

        body.theme-dark .wizard-navigation {
            background: rgba(26, 32, 44, 0.95);
        }

        .nav-content {
            max-width: var(--max-content-width);
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-btn {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-sm) var(--space-lg);
            border: 2px solid var(--accent-color);
            background: var(--accent-color);
            color: var(--accent-text-color);
            border-radius: var(--border-radius-full);
            font-weight: 600;
            font-size: var(--text-sm);
            cursor: pointer;
            transition: var(--transition-base);
            min-width: 120px;
            justify-content: center;
            min-height: 48px;
        }

        .nav-btn:hover:not(:disabled) {
            background: var(--accent-dark);
            border-color: var(--accent-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .nav-btn:disabled {
            background: var(--border-gray);
            border-color: var(--border-gray);
            color: var(--text-secondary);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .prev-btn svg {
            order: -1;
        }

        .progress-indicator {
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--text-primary);
            text-align: center;
            min-width: 120px;
        }

        /* ===== DYNAMIC GROUP BOX TEXT COLOR - THE CORRECT CONTRAST FIX ===== */
        #wizard-container section ol,
        #wizard-container section ul {
            color: var(--group-box-text);
        }

        /* ===== COMPREHENSIVE MOBILE OPTIMIZATION - NATIVE APP EXPERIENCE ===== */
        @media (max-width: 768px) {
            /* iOS Safari Viewport Fix - Use Fixed Pixel Heights */
            html {
                height: -webkit-fill-available;
            }

            body {
                min-height: -webkit-fill-available;
            }

            /* TASK 1: RESPONSIVE WIZARD CARD - THE CORE FIX - iOS OPTIMIZED */
            #wizard-container {
                width: 90vw !important;
                max-width: 500px !important;
                height: 600px !important;
                max-height: calc(100vh - 120px) !important;
                min-height: 400px !important;
            }

            #wizard-container > section {
                overflow-y: auto;
                padding: 20px;
                max-height: calc(600px - 40px);
                height: auto;
                /* iOS-specific scrolling improvements */
                -webkit-overflow-scrolling: touch;
                overscroll-behavior: contain;
                /* CRITICAL: Start content at top, not center */
                justify-content: flex-start !important;
                align-items: stretch !important;
            }

            /* TASK 2: ADAPTIVE TYPOGRAPHY & SPACING - MOBILE-FIRST HIERARCHY */
            
            /* Hero Section Typography */
            .hero-title {
                font-size: var(--text-3xl);
                margin-bottom: 16px;
                line-height: 1.2;
            }

            .hero-subtitle {
                font-size: var(--text-base);
                margin-bottom: 24px;
                line-height: 1.5;
            }

            /* Content Section Typography */
            .content-section h2 {
                font-size: var(--text-2xl);
                margin-bottom: 16px;
                line-height: 1.3;
            }

            .content-section p {
                font-size: var(--text-base);
                margin-bottom: 16px;
                line-height: 1.6;
            }

            .content-section li {
                font-size: var(--text-base);
                margin-bottom: 8px;
                line-height: 1.5;
            }

            /* Spacing Optimization */
            .content-section {
                padding: 20px;
                margin: 0 12px 12px 12px; /* Remove top margin, keep bottom */
                width: auto;
                align-self: stretch;
            }

            /* Ensure hero sections start at top */
            .hero-section {
                justify-content: flex-start !important;
                padding-top: 40px;
                text-align: center;
            }

            /* Ensure footer sections allow scrolling to bottom */
            .footer-section {
                justify-content: flex-start !important;
                padding-top: 40px;
                text-align: center;
            }

            .info-box {
                padding: 16px;
                margin: 16px 0;
                font-size: var(--text-sm);
            }

            .note-block {
                padding: 16px;
                margin: 16px 0;
                font-size: var(--text-sm);
            }

            .content-section ol,
            .content-section ul {
                margin-bottom: 16px;
                padding-left: 20px;
            }

            /* Footer Section Mobile Optimization */
            .completion-content h2 {
                font-size: var(--text-3xl);
                margin-bottom: 16px;
            }

            .contact-info {
                margin-top: 24px;
                padding: 16px;
                font-size: var(--text-sm);
            }

            /* Header Optimization */
            .fixed-header {
                padding: 12px 16px;
            }

            .header-content {
                flex-direction: column;
                gap: 8px;
            }

            .logo {
                font-size: var(--text-lg);
            }

            .brand-label {
                font-size: var(--text-xs);
            }

            /* Navigation Bar Mobile Optimization */
            .wizard-navigation {
                padding: 16px 12px;
            }

            .nav-btn {
                min-width: 80px;
                padding: 12px 16px;
                font-size: var(--text-sm);
                min-height: 44px;
            }

            .progress-indicator {
                font-size: var(--text-xs);
                min-width: 100px;
            }

            /* Welcome Screen Mobile Optimization */
            .welcome-content {
                padding: 32px 20px;
                max-width: 95%;
                max-height: 80vh;
                overflow-y: auto;
                margin-top: 10vh; /* Start near top, not center */
            }

            #welcome-modal {
                align-items: flex-start !important;
                padding-top: 20px;
            }

            .welcome-title {
                font-size: var(--text-3xl);
                margin-bottom: 12px;
            }

            .welcome-subtitle {
                font-size: var(--text-base);
                margin-bottom: 32px;
            }

            .section-title {
                font-size: var(--text-lg);
                margin-bottom: 16px;
            }

            .theme-toggle-container {
                flex-direction: column;
                gap: 8px;
                margin-bottom: 32px;
            }

            .theme-option {
                padding: 12px 16px;
                font-size: var(--text-sm);
            }

            .color-swatches {
                gap: 12px;
                margin-bottom: 32px;
            }

            .color-swatch {
                width: 32px;
                height: 32px;
            }

            /* Password Gate Mobile Optimization */
            .password-content {
                padding: 40px 24px;
                max-width: 95%;
                max-height: 80vh;
                overflow-y: auto;
                margin-top: 10vh; /* Start near top, not center */
            }

            #password-gate {
                align-items: flex-start !important;
                padding-top: 20px;
            }

            .password-title {
                font-size: var(--text-3xl);
                margin-bottom: 12px;
            }

            .password-subtitle {
                font-size: var(--text-base);
                margin-bottom: 32px;
            }

            .password-input {
                padding: 16px 20px;
                font-size: var(--text-base);
            }

            .password-submit {
                padding: 16px 24px;
                font-size: var(--text-base);
            }

            /* Mobile-Specific Improvements */
            .main-container {
                /* NEUTRALIZED: Mobile layout interference removed */
            }

            /* Ensure proper touch targets */
            button, .nav-btn, .theme-option, .color-swatch {
                min-height: 44px;
                min-width: 44px;
            }

            /* Optimize code blocks for mobile */
            .content-section code {
                font-size: 0.85em;
                padding: 3px 6px;
                word-break: break-word;
            }

            /* Mobile scrolling improvements */
            * {
                -webkit-overflow-scrolling: touch;
            }
        }

        /* ===== iOS SPECIFIC FIXES - ADDITIONAL VIEWPORT SUPPORT ===== */
        @media (max-width: 480px) {
            /* Extra small devices - more conservative sizing */
            #wizard-container {
                width: 95vw !important;
                height: 500px !important;
                max-height: calc(100vh - 100px) !important;
                min-height: 350px !important;
            }

            #wizard-container > section {
                padding: 16px;
                max-height: calc(500px - 32px);
                justify-content: flex-start !important;
                align-items: stretch !important;
            }

            .content-section {
                padding: 16px;
                margin: 8px;
            }

            .hero-title {
                font-size: var(--text-2xl);
                margin-bottom: 12px;
            }

            .content-section h2 {
                font-size: var(--text-xl);
                margin-bottom: 12px;
            }
        }

        /* ===== iOS SAFE AREA SUPPORT ===== */
        @supports (padding: env(safe-area-inset-top)) {
            .fixed-header {
                padding-top: max(12px, env(safe-area-inset-top));
            }

            .wizard-navigation {
                padding-bottom: max(16px, env(safe-area-inset-bottom));
            }

            #password-gate,
            #welcome-modal {
                padding-top: env(safe-area-inset-top);
                padding-bottom: env(safe-area-inset-bottom);
                padding-left: env(safe-area-inset-left);
                padding-right: env(safe-area-inset-right);
            }
        }

        /* ===== ANIMATIONS & MICRO-INTERACTIONS ===== */
        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        .keyboard-navigation *:focus {
            outline: 2px solid var(--accent-color) !important;
            outline-offset: 2px !important;
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            :root {
                --shadow-subtle: 0 2px 8px rgba(0, 0, 0, 0.3);
                --shadow-medium: 0 4px 16px rgba(0, 0, 0, 0.4);
                --shadow-strong: 0 8px 32px rgba(0, 0, 0, 0.5);
            }
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            html {
                scroll-behavior: auto;
            }
        }
    </style>
</head>
<body class="scroll-lock">
    <!-- ===== SECURE PASSWORD GATE (THE AUTHENTICATION LAYER) ===== -->
    <div id="password-gate">
        <div class="password-content">
            <div class="lock-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                    <circle cx="12" cy="16" r="1"/>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                </svg>
            </div>
            <h1 class="password-title">Authentication Required</h1>
            <p class="password-subtitle">Please enter the password to access the DMSS Tutorial.</p>
            
            <form id="password-form" class="password-form">
                <div class="password-input-container">
                    <input 
                        type="password" 
                        id="password-input" 
                        class="password-input"
                        placeholder="Enter password"
                        autocomplete="current-password"
                        required
                    >
                </div>
                <button type="submit" class="password-submit" id="password-submit">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
                        <polyline points="10,17 15,12 10,7"/>
                        <line x1="15" y1="12" x2="3" y2="12"/>
                    </svg>
                    Unlock Tutorial
                </button>
                <div class="password-error" id="password-error">
                    Incorrect password. Please try again.
                </div>
            </form>
        </div>
    </div>

    <!-- ===== WELCOME EXPERIENCE (THE GRAND ENTRY) ===== -->
    <div id="welcome-modal" class="is-hidden">
        <div class="welcome-content">
            <h1 class="welcome-title">Ageint Security DMSS Tutorial</h1>
            <p class="welcome-subtitle">Personalize your tutorial experience.</p>
            
            <div class="customization-section">
                <h3 class="section-title">Theme Selection</h3>
                <div class="theme-toggle-container">
                    <div class="theme-option active" data-theme="light">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"/>
                            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                        </svg>
                        Light Mode
                    </div>
                    <div class="theme-option" data-theme="dark">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                        Dark Mode
                    </div>
                </div>
            </div>
            
            <div class="customization-section">
                <h3 class="section-title">Accent Color</h3>
                <div class="color-swatches">
                    <div class="color-swatch red" data-color="#E53E3E" data-light="#FED7D7" data-dark="#C53030" data-contrast-theme="light-on-dark"></div>
                    <div class="color-swatch green" data-color="#38A169" data-light="#C6F6D5" data-dark="#2F855A" data-contrast-theme="light-on-dark"></div>
                    <div class="color-swatch blue active" data-color="#3182CE" data-light="#E6F3FF" data-dark="#2C5AA0" data-contrast-theme="light-on-dark"></div>
                    <div class="color-swatch yellow" data-color="#eec643" data-light="#FAF089" data-dark="#B7791F" data-contrast-theme="dark-on-light"></div>
                    <div class="color-swatch purple" data-color="#805AD5" data-light="#E9D8FD" data-dark="#6B46C1" data-contrast-theme="light-on-dark"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== DISCLAIMER NOTIFICATION ===== -->
    <div id="disclaimer-bar">
        <div class="disclaimer-text">
            If you are having trouble at any point during this process, feel free to call us at <strong>713-962-3558</strong>
        </div>
        <button class="disclaimer-close" id="disclaimerClose" aria-label="Close notification">Ã—</button>
    </div>

    <!-- ===== TUTORIAL CONTENT ===== -->
    <div id="tutorial-content">
        <!-- Fixed Header -->
        <header class="fixed-header">
            <div class="header-content">
                <a href="#" class="logo">Ageint Security</a>
                <div class="brand-label">Created by Ageint Security</div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-container">
            <div id="wizard-container">
                <!-- Step 1: Welcome -->
                <section class="hero-section" id="hero" data-step="0">
                    <h1 class="hero-title">DMSS App Setup Guide</h1>
                    <p class="hero-subtitle">A comprehensive guide to help you set up your DMSS app on an additional phone with professional step-by-step instructions.</p>
                </section>

                <!-- Step 2: Overview -->
                <section class="content-section" id="overview" data-step="1">
                    <h2>Overview: What We'll Do</h2>
                    <p>We'll help you get the camera views from one phone onto another using the DMSS app.</p>
                    
                    <div class="info-box">
                        <p><strong>Two-Part Process:</strong></p>
                        <p>Part 1: Get the camera's serial number from the working phone</p>
                        <p>Part 2: Add the cameras to the new phone</p>
                    </div>

                    <div class="note-block">
                        <p>You can also view an easier-to-read copy of these instructions at: <br><a href="https://docs.google.com/document/d/14SbRrhN0ojhyRPH5K6Q9EkYXfjoewWPcuoVqFCQgUbM/edit?usp=sharing" target="_blank">View Instructions Online</a></p>
                    </div>
                </section>

                <!-- Step 3: Part 1 Introduction -->
                <section class="content-section" id="part1-intro" data-step="2">
                    <h2>Part 1: Find the Serial Number</h2>
                    <p><em>This section is for the person whose phone already has the cameras working.</em></p>
                    
                    <div class="info-box">
                        <p><strong>What you'll need:</strong></p>
                        <ul>
                            <li>The phone that already has DMSS working</li>
                            <li>Ability to take a screenshot</li>
                        </ul>
                    </div>
                    
                    <p>We need to find the camera's <strong>Serial Number (S/N)</strong> from your working phone. This is like the camera's unique ID that we'll use to add it to the other phone.</p>
                </section>

                <!-- Step 4: Open DMSS App -->
                <section class="content-section" id="open-app" data-step="3">
                    <h2>Step 1: Open the DMSS App</h2>
                    <div style="text-align: center; margin: var(--space-2xl) 0;">
                        <div style="font-size: 64px; color: var(--accent-color); margin-bottom: var(--space-md);">ðŸ“±</div>
                    </div>
                    <p><strong>Find the DMSS app icon on your phone and tap it to open.</strong></p>
                    <p>You should see a list of your cameras or a screen where you can see them.</p>
                </section>

                <!-- Step 5: Find Three Dots -->
                <section class="content-section" id="find-dots" data-step="4">
                    <h2>Step 2: Find the Three Dots Menu</h2>
                    <div style="text-align: center; margin: var(--space-2xl) 0;">
                        <div style="font-size: 64px; color: var(--accent-color); margin-bottom: var(--space-md);">â‹®</div>
                    </div>
                    <p><strong>Look next to the camera you want the information for.</strong></p>
                    <p>On the right side, you should see three little dots (<code>â‹®</code>). They might be next to a round "play" button.</p>
                </section>

                <!-- Step 6: Tap Device Details -->
                <section class="content-section" id="device-details" data-step="5">
                    <h2>Step 3: Tap "Device Details"</h2>
                    <p><strong>1. Tap on those three dots (<code>â‹®</code>)</strong></p>
                    <p>A small menu will pop up.</p>
                    
                    <p><strong>2. Tap on the option that says "Device Details"</strong></p>
                    
                    <div class="note-block">
                        <p>This will open a screen with technical information about your camera.</p>
                    </div>
                </section>

                <!-- Step 7: Find Serial Number -->
                <section class="content-section" id="find-serial" data-step="6">
                    <h2>Step 4: Find and Screenshot the Serial Number</h2>
                    <p><strong>Look for "S/N:" or "SN:" on the Device Details screen.</strong></p>
                    
                    <div class="info-box">
                        <p><strong>What to look for:</strong></p>
                        <ul>
                            <li>Text that says "<code>S/N:</code>" or "<code>SN:</code>"</li>
                            <li>This is followed by a long string of letters and numbers</li>
                            <li>This is the Serial Number we need!</li>
                        </ul>
                    </div>
                    
                    <p><strong>Take a screenshot of this page.</strong></p>
                    <p><em>Most phones: Press power button + volume down button at the same time.</em></p>
                </section>

                <!-- Step 8: Alternative Location -->
                <section class="content-section" id="alternative-location" data-step="7">
                    <h2>Step 5: If You Don't See S/N Right Away</h2>
                    <div style="text-align: center; margin: var(--space-2xl) 0;">
                        <div style="font-size: 64px; color: var(--accent-color); margin-bottom: var(--space-md);">â†’</div>
                    </div>
                    <p><strong>Look for a small arrow pointing right (â†’)</strong>, usually at the very top right of the screen.</p>
                    
                    <p><strong>Tap that arrow.</strong></p>
                    
                    <p>This will take you to another page. <strong>Take a screenshot of this new page.</strong> The Serial Number should be on this page.</p>
                </section>

                <!-- Step 9: Part 2 Introduction -->
                <section class="content-section" id="part2-intro" data-step="8">
                    <h2>Part 2: Add Cameras to New Phone</h2>
                    <p><em>This section is for the person setting up the DMSS app on a different phone.</em></p>
                    
                    <div class="info-box">
                        <p><strong>What you'll need:</strong></p>
                        <ul>
                            <li>The screenshot with the Serial Number from Part 1</li>
                            <li>The new phone with DMSS app installed</li>
                            <li>These login details: Username: <code>admin</code>, Password: <code>Ageint2016</code></li>
                        </ul>
                    </div>
                </section>

                <!-- Step 10: Add Device -->
                <section class="content-section" id="add-device" data-step="9">
                    <h2>Step 6: Start Adding a New Device</h2>
                    <div style="text-align: center; margin: var(--space-2xl) 0;">
                        <div style="font-size: 64px; color: var(--accent-color); margin-bottom: var(--space-md);">+</div>
                    </div>
                    <p><strong>1. Open the DMSS App</strong> on the new phone</p>
                    <p><strong>2. Tap the Plus Sign (+)</strong> on the app's main screen, usually at the top right corner</p>
                    <p><strong>3. Choose "Manually Add"</strong> from the menu that appears</p>
                </section>

                <!-- Step 11: Device Configuration -->
                <section class="content-section" id="device-config" data-step="10">
                    <h2>Step 7: Configure Device Settings</h2>
                    <p><strong>1. Select Device Type:</strong></p>
                    <ul>
                        <li>Tap on "<strong>NVR/XVR</strong>" from the device list</li>
                        <li>On the next screen, tap on "<strong>NVR</strong>"</li>
                    </ul>
                    
                    <p><strong>2. Enter the Serial Number:</strong></p>
                    <ul>
                        <li>Type in the number from your screenshot</li>
                        <li class="important-text">Important: All "0"s are the number zero, not the letter "O"</li>
                    </ul>
                    
                    <p><strong>3. Fill in Device Details:</strong></p>
                    <ul>
                        <li><strong>Device Name:</strong> <span class="placeholder-text">[Choose any name you like]</span></li>
                        <li><strong>Username:</strong> <code>admin</code></li>
                        <li><strong>Password:</strong> <code>Ageint2016</code> <em>(Capital 'A'!)</em></li>
                    </ul>
                </section>

                <!-- Step 12: Completion -->
                <section class="footer-section" id="completion" data-step="11">
                    <div class="completion-content">
                        <h2>ðŸŽ‰ Setup Complete!</h2>
                        <p>Tap the <strong>Save</strong> button (or "Next" or ðŸ’¾) at the top right.</p>
                        <p>You might need to tap "Next" or "Done" a couple more times.</p>
                        
                        <div class="contact-info">
                            <p><strong>Your cameras should now appear in the app!</strong></p>
                            <p>If you encounter any issues, please don't hesitate to contact us:</p>
                            <p><strong>The Support Team</strong><br>
                            Ageint Security<br>
                            <a href="tel:7139623558">713-962-3558</a></p>
                        </div>
                    </div>
                </section>
            </div>
            
            <!-- Navigation Bar -->
            <div class="wizard-navigation">
                <div class="nav-content">
                    <button class="nav-btn prev-btn" id="prevBtn" disabled>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Previous
                    </button>
                    
                    <div class="progress-indicator">
                        <span id="stepCounter">Step 1 of 12</span>
                    </div>
                    
                    <button class="nav-btn next-btn" id="nextBtn">
                        Next
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
            </div>
        </main>
    </div>
    <script>
        // ===== SECURITY LAYER - PASSWORD AUTHENTICATION ===== //
        const CORRECT_HASH = '3c657c75225c56fce40360d1cab79a2c1a6bbc0eb900b0e267e877db4236ceff';
        
        // SHA-256 hashing function using SubtleCrypto API
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }

        // Password validation and application unlock
        async function validatePassword(password) {
            try {
                const hashedInput = await sha256(password);
                return hashedInput === CORRECT_HASH;
            } catch (error) {
                console.error('Password validation error:', error);
                return false;
            }
        }

        // Password gate management
        function showPasswordError() {
            const errorElement = document.getElementById('password-error');
            const passwordInput = document.getElementById('password-input');
            errorElement.classList.add('show');
            passwordInput.value = '';
            passwordInput.focus();
            
            // Hide error after 4 seconds
            setTimeout(() => {
                errorElement.classList.remove('show');
            }, 4000);
        }

        function hidePasswordGate() {
            const passwordGate = document.getElementById('password-gate');
            passwordGate.classList.add('is-hidden');
            
            // After password gate is hidden, show welcome modal
            setTimeout(() => {
                const welcomeModal = document.getElementById('welcome-modal');
                welcomeModal.classList.remove('is-hidden');
            }, 500);
        }

        // Password form submission handler
        async function handlePasswordSubmit(e) {
            e.preventDefault();
            
            const passwordInput = document.getElementById('password-input');
            const submitButton = document.getElementById('password-submit');
            const password = passwordInput.value;
            
            if (!password) {
                passwordInput.focus();
                return;
            }
            
            // Show loading state
            submitButton.classList.add('loading');
            submitButton.disabled = true;
            
            // Validate password
            const isValid = await validatePassword(password);
            
            // Remove loading state
            submitButton.classList.remove('loading');
            submitButton.disabled = false;
            
            if (isValid) {
                hidePasswordGate();
            } else {
                showPasswordError();
            }
        }

        // ===== WIZARD ENGINE: CLEAN, ROBUST JAVASCRIPT ===== //
        
        // Global Variables
        let currentStep = 0;
        const totalSteps = 12;
        let currentTheme = 'light';
        
        // DOM Elements
        const wizardSteps = document.querySelectorAll('#wizard-container > section');
        const nextButton = document.getElementById('nextBtn');
        const prevButton = document.getElementById('prevBtn');
        const stepCounter = document.getElementById('stepCounter');
        const welcomeModal = document.getElementById('welcome-modal');
        const tutorialContent = document.getElementById('tutorial-content');
        const disclaimerBar = document.getElementById('disclaimer-bar');
        const disclaimerClose = document.getElementById('disclaimerClose');
        
        // ===== WELCOME SCREEN FUNCTIONALITY (STATEFUL LOGIC) ===== //
        function setupWelcomeScreen() {
            const themeOptions = document.querySelectorAll('.theme-option');
            const colorSwatches = document.querySelectorAll('.color-swatch');

            // Theme toggle functionality - MAINTAIN STATE
            themeOptions.forEach(option => {
                option.addEventListener('click', (e) => {
                    themeOptions.forEach(opt => opt.classList.remove('active'));
                    e.currentTarget.classList.add('active');
                    
                    currentTheme = e.currentTarget.dataset.theme;
                    if (currentTheme === 'dark') {
                        document.body.classList.add('theme-dark');
                    } else {
                        document.body.classList.remove('theme-dark');
                    }
                });
            });

            // Color swatch selection - THE BUTTONLESS ENTRY FLOW
            colorSwatches.forEach(swatch => {
                swatch.addEventListener('click', (e) => {
                    colorSwatches.forEach(s => s.classList.remove('active'));
                    e.currentTarget.classList.add('active');
                    
                    const color = e.currentTarget.dataset.color;
                    const lightColor = e.currentTarget.dataset.light;
                    const darkColor = e.currentTarget.dataset.dark;
                    const contrastTheme = e.currentTarget.dataset.contrastTheme;
                    
                    updateAccentColor(color, lightColor, darkColor);
                    updateTextContrast(contrastTheme);
                    
                    // Preserve theme state during color selection
                    if (currentTheme === 'dark') {
                        document.body.classList.add('theme-dark');
                    }
                    
                    // Start tutorial after 500ms delay
                    setTimeout(() => {
                        startTutorial();
                    }, 500);
                });
            });
        }

        // Update accent color throughout the site
        function updateAccentColor(color, lightColor, darkColor) {
            const rgb = hexToRgb(color);
            
            document.documentElement.style.setProperty('--accent-color', color);
            document.documentElement.style.setProperty('--accent-color-rgb', `${rgb.r}, ${rgb.g}, ${rgb.b}`);
            document.documentElement.style.setProperty('--accent-light', lightColor);
            document.documentElement.style.setProperty('--accent-dark', darkColor);
        }

        // Update text contrast - THE FINAL WORD
        function updateTextContrast(contrastTheme) {
            // Remove existing contrast classes
            document.body.classList.remove('contrast-dark-on-light');
            
            // Add the appropriate contrast class
            if (contrastTheme === 'dark-on-light') {
                document.body.classList.add('contrast-dark-on-light');
            }
        }

        // Helper function to convert hex to RGB
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        // Start the tutorial (transition from welcome to wizard)
        function startTutorial() {
            welcomeModal.classList.add('is-hidden');
            tutorialContent.classList.add('is-visible');
            document.body.classList.remove('scroll-lock');
            
            // Initialize wizard after transition
            setTimeout(() => {
                showStep(0);
            }, 600);
        }

        // ===== WIZARD CORE FUNCTIONALITY - THE JAVASCRIPT ENGINE ===== //
        
        // The showStep function - Single source of truth for slide visibility
        function showStep(index) {
            // Remove active-step from all slides
            wizardSteps.forEach(step => {
                step.classList.remove('active-step');
            });
            
            // Add active-step to target slide
            wizardSteps[index].classList.add('active-step');
            
            // Update current step
            currentStep = index;
            updateUI();
        }

        // Update UI elements (buttons, counter)
        function updateUI() {
            stepCounter.textContent = `Step ${currentStep + 1} of ${totalSteps}`;
            
            // Update button states
            prevButton.disabled = currentStep === 0;
            
            if (currentStep === totalSteps - 1) {
                nextButton.innerHTML = `
                    Finish
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 6L9 17l-5-5"/>
                    </svg>
                `;
            } else {
                nextButton.innerHTML = `
                    Next
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                `;
            }
        }

        // Navigation functions
        function nextStep() {
            if (currentStep < totalSteps - 1) {
                showStep(currentStep + 1);
            }
        }

        function previousStep() {
            if (currentStep > 0) {
                showStep(currentStep - 1);
            }
        }

        // ===== DISCLAIMER FUNCTIONALITY ===== //
        function setupDisclaimer() {
            if (disclaimerClose) {
                disclaimerClose.addEventListener('click', () => {
                    disclaimerBar.classList.add('is-hidden');
                    document.body.classList.add('disclaimer-hidden');
                });
            }
        }

        // ===== EVENT LISTENERS ===== //
        nextButton.addEventListener('click', nextStep);
        prevButton.addEventListener('click', previousStep);

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
                e.preventDefault();
                nextStep();
            } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                e.preventDefault();
                previousStep();
            }
        });

        // Touch gestures for mobile - THE "NATIVE APP" MOBILE EXPERIENCE
        let startX = null;
        document.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
        }, { passive: true });

        document.addEventListener('touchend', (e) => {
            if (!startX) return;
            
            const endX = e.changedTouches[0].clientX;
            const diffX = startX - endX;
            
            if (Math.abs(diffX) > 50) {
                if (diffX > 0) {
                    nextStep(); // Swipe left = next
                } else {
                    previousStep(); // Swipe right = previous
                }
            }
            
            startX = null;
        }, { passive: true });

        // ===== PASSWORD GATE INITIALIZATION ===== //
        function setupPasswordGate() {
            const passwordForm = document.getElementById('password-form');
            const passwordInput = document.getElementById('password-input');
            
            if (passwordForm) {
                passwordForm.addEventListener('submit', handlePasswordSubmit);
            }
            
            // Auto-focus password input
            if (passwordInput) {
                setTimeout(() => {
                    passwordInput.focus();
                }, 100);
            }
            
            // Enter key handling
            if (passwordInput) {
                passwordInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        handlePasswordSubmit(e);
                    }
                });
            }
        }

        // ===== INITIALIZATION - NEW FLOW WITH PASSWORD GATE ===== //
        document.addEventListener('DOMContentLoaded', () => {
            setupPasswordGate();
            setupWelcomeScreen();
            setupDisclaimer();
        });

        // Initialize immediately if DOM is already loaded
        if (document.readyState !== 'loading') {
            setupPasswordGate();
            setupWelcomeScreen();
            setupDisclaimer();
        }
    </script>
</body>
</html>
